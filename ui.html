<html>
<head>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="p-6 bg-gray-100">
    <div class="max-w-2xl mx-auto bg-white p-8 rounded-lg shadow-md">
        <h1 class="text-2xl font-bold mb-4">カラーパレットジェネレーター</h1>
        <p class="mb-2 text-gray-600">カラーコードを入力してください。複数のコードは改行、空白、カンマ、またはタブで区切ってください。</p>
        <textarea id="colorInput" rows="6" class="w-full p-2 border border-gray-300 rounded mb-4" placeholder="#FF0000&#10;#00FF00, #0000FF&#9;#FFFF00"></textarea>
        <button id="generateButton" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">生成</button>
        <p id="errorMessage" class="text-red-500 mt-2 hidden"></p>
    </div>

    <script>
        document.getElementById('generateButton').onclick = () => {
            const colorInput = document.getElementById('colorInput').value;
            const colors = colorInput.split(/[\s,\t]+/).filter(color => color.trim() !== '');
            
            // 簡単な検証
            const invalidColors = colors.filter(color => !/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(color));
            if (invalidColors.length > 0) {
                document.getElementById('errorMessage').textContent = `無効なカラーコード: ${invalidColors.join(', ')}`;
                document.getElementById('errorMessage').classList.remove('hidden');
                return;
            }

            document.getElementById('errorMessage').classList.add('hidden');
            parent.postMessage({ pluginMessage: { type: 'generate-palette', colors: colors } }, '*');
        };
    </script>
</body>
</html>